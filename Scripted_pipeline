node 
{  def image
     
    for ( int i=1; i<=2; i++ )
    {  stage "Stage #" +i
       echo "Hello World...!"
        if ( i==1 )
        {
            git "https://github.com/jawadabbasi54/test.git"
            echo 'Stage 1 is running and successfully pull source code from github'
        }
        
        else 
        {  
            build 'bash_test'
            image = docker.build("jawadabbasi/test")
            docker.withRegistry('https://registry.hub.docker.com', 'docker-hub-credentials')
            image.push("apache_image")
            echo 'Stage 2 is running'}
    }
}
